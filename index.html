<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CLICK ABYSS</title>

<style>
:root {
  --bg1:#0f2027;
  --bg2:#203a43;
  --bg3:#2c5364;
  --accent:#00ff88;
  --danger:#ff5555;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
  color:white;
  min-height:100vh;
  overflow:hidden;
}

header{
  text-align:center;
  padding:20px;
}

h1{margin:0;font-size:42px}

#badge{color:gold;margin-top:5px}

#container{
  display:flex;
  justify-content:center;
  align-items:center;
  height:calc(100vh - 140px);
}

#panel{
  background:rgba(0,0,0,0.45);
  padding:30px;
  border-radius:16px;
  width:380px;
  text-align:center;
  box-shadow:0 0 40px rgba(0,255,136,0.2);
}

input,button{
  padding:12px;
  font-size:16px;
  border-radius:8px;
  border:none;
}

button{
  cursor:pointer;
  background:var(--accent);
  color:black;
  margin:8px 0;
  width:100%;
  transition:.2s;
}
button:hover{transform:scale(1.05)}

#clicks{font-size:34px;margin:15px 0}
#timer{opacity:.8;margin-bottom:10px}
#msg{min-height:24px;margin-top:10px}

.small{
  font-size:13px;
  opacity:.7;
}

.admin{
  display:none;
  margin-top:15px;
  border-top:1px solid rgba(255,255,255,.2);
  padding-top:10px;
}

#matrix{
  position:fixed;
  inset:0;
  z-index:-1;
  pointer-events:none;
}

/* ================= MOBILE TOGGLE ================= */
#mobileToggle{
  position:fixed;
  right:10px;
  top:40%;
  background:#00ff88;
  color:black;
  font-weight:bold;
  padding:12px;
  border-radius:14px;
  cursor:pointer;
  text-align:center;
  font-size:12px;
  z-index:9999;
  box-shadow:0 0 20px rgba(0,0,0,.4);
}

/* ================= MODE MOBILE ================= */
body.mobile-mode h1{font-size:32px}
body.mobile-mode #panel{width:95%}
body.mobile-mode button{
  padding:22px;
  font-size:22px;
}
body.mobile-mode input{
  font-size:18px;
  padding:16px;
}
body.mobile-mode #clicks{font-size:42px}
</style>
</head>

<body>

<canvas id="matrix"></canvas>

<div id="mobileToggle">üì±<br>JE SUIS<br>MOBILE</div>

<header>
  <h1>üñ±Ô∏è CLICK ABYSS</h1>
  <input id="pseudo" placeholder="Pseudo">
  <div id="badge"></div>
</header>

<div id="container">
  <div id="panel">

    <div id="timer">‚è±Ô∏è Temps total : 0s</div>
    <div id="clicks">0 clics</div>

    <button id="clickBtn">CLIQUER</button>
    <button onclick="startBlitz()">‚ö° Blitz (1 min)</button>
    <button onclick="resetGame()" style="background:var(--danger)">RESET</button>

    <div id="msg"></div>

    <input id="codeInput" placeholder="Code secret">
    <button onclick="useCode()">OK</button>

    <div class="admin" id="adminPanel">
      <div class="small">ADMIN PANEL</div>
      <button onclick="clicks+=10000;update()">+10 000 clics</button>
      <button onclick="clicks+=100000;update()">+100 000 clics</button>
    </div>

  </div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/25/audio_946b0bfa63.mp3">
</audio>

<script>
// ===================== ETAT =====================
let clicks = +localStorage.getItem("clicks") || 0;
let pseudo = localStorage.getItem("pseudo") || "";
let badge = localStorage.getItem("badge") || "";
let startTime = +localStorage.getItem("startTime") || Date.now();

let blitz=false, blitzScore=0, blitzTimer=60, savedClicksBeforeBlitz=0;

// ===================== ELEMENTS =====================
const clickEl=document.getElementById("clicks");
const timerEl=document.getElementById("timer");
const msg=document.getElementById("msg");
const badgeEl=document.getElementById("badge");
const music=document.getElementById("music");

document.getElementById("pseudo").value=pseudo;
badgeEl.innerText=badge;

// ===================== TIMER =====================
setInterval(()=>{
  if(!blitz){
    timerEl.innerText="‚è±Ô∏è Temps total : "+Math.floor((Date.now()-startTime)/1000)+"s";
  }
},1000);

// ===================== UPDATE =====================
function update(){
  clickEl.innerText=clicks.toLocaleString()+" clics";
  localStorage.setItem("clicks",clicks);

  if(clicks>=1_000_000) matrixActive=true;
  if(clicks>=10_000_000 && badge!=="üèÜ PRO CLICKER"){
    badge="üèÜ PRO CLICKER";
    badgeEl.innerText=badge;
    localStorage.setItem("badge",badge);
  }
}
update();

// ===================== CLIC =====================
clickBtn.onclick=()=>{
  music.play();
  if(blitz){
    blitzScore++;
    clickEl.innerText=blitzScore+" clics (BLITZ)";
  }else{
    clicks++;
    update();
  }
};

// ===================== RESET =====================
function resetGame(){
  if(confirm("Reset total ?")){
    localStorage.clear();
    location.reload();
  }
}

// ===================== BLITZ =====================
function startBlitz(){
  if(blitz) return;
  blitz=true;
  savedClicksBeforeBlitz=clicks;
  blitzScore=0;
  blitzTimer=60;
  msg.innerText="‚ö° BLITZ EN COURS";

  const i=setInterval(()=>{
    blitzTimer--;
    timerEl.innerText="‚ö° Blitz : "+blitzTimer+"s";
    if(blitzTimer<=0){
      clearInterval(i);
      blitz=false;
      clicks=savedClicksBeforeBlitz;
      msg.innerText="‚ö° Blitz termin√© : "+blitzScore+" clics";
      update();
    }
  },1000);
}

// ===================== ADMIN =====================
function useCode(){
  if(codeInput.value==="516962"){
    adminPanel.style.display="block";
    msg.innerText="üõ†Ô∏è Mode admin activ√©";
  }else msg.innerText="‚ùå Code invalide";
}

// ===================== MATRIX =====================
const canvas=matrix;
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;
const letters="01ABCDEF#$%";
const font=16;
const cols=canvas.width/font;
const drops=Array(cols).fill(1);
let matrixActive=false;

setInterval(()=>{
  if(!matrixActive)return;
  ctx.fillStyle="rgba(0,0,0,.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00ff88";
  ctx.font=font+"px monospace";
  drops.forEach((y,i)=>{
    ctx.fillText(letters[Math.random()*letters.length|0],i*font,y*font);
    if(y*font>canvas.height && Math.random()>.98)drops[i]=0;
    drops[i]++;
  });
},33);

// ===================== MOBILE TOGGLE =====================
const mobileToggle=document.getElementById("mobileToggle");
mobileToggle.onclick=()=>{
  document.body.classList.toggle("mobile-mode");
  mobileToggle.innerHTML=document.body.classList.contains("mobile-mode")
    ?"üíª<br>MODE<br>PC":"üì±<br>JE SUIS<br>MOBILE";
  navigator.vibrate?.(50);
};

// auto-detect mobile
if(/Mobi|Android|iPhone/i.test(navigator.userAgent)){
  document.body.classList.add("mobile-mode");
  mobileToggle.innerHTML="üíª<br>MODE<br>PC";
}
</script>

</body>
</html>
