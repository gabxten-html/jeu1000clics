<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CLICK ABYSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --green:#00ff88;
  --gold:#ffd700;
  --bg:#000;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:monospace;
  background:black;
  color:var(--green);
  overflow:hidden;
}

header{
  text-align:center;
  padding:15px;
  position:relative;
  z-index:2;
}

h1{margin:0}

#eventBanner{
  color:var(--gold);
  font-weight:bold;
  margin-top:5px;
}

#ui{
  position:relative;
  z-index:2;
  display:flex;
  justify-content:center;
  align-items:center;
  height:70vh;
}

#panel{
  background:rgba(0,0,0,.75);
  padding:25px;
  border-radius:14px;
  width:320px;
  text-align:center;
  border:1px solid var(--green);
}

button{
  width:100%;
  padding:12px;
  margin:6px 0;
  font-size:16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:var(--green);
  color:black;
}

button:hover{transform:scale(1.05)}

#clicks{
  font-size:32px;
  margin:10px 0;
}

#multiplier{
  opacity:.8;
}

#bgMenu{
  position:fixed;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,.85);
  border:1px solid var(--green);
  padding:10px;
  border-radius:12px;
  z-index:3;
}

#bgMenu h3{
  margin:0 0 8px;
  font-size:14px;
  text-align:center;
}

.bgBtn{
  font-size:13px;
  margin-bottom:5px;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<header>
  <h1>üñ±Ô∏è CLICK ABYSS</h1>
  <div id="eventBanner"></div>
</header>

<div id="ui">
  <div id="panel">
    <div id="clicks">0 clics</div>
    <div id="multiplier">Multiplicateur x1</div>
    <button id="clickBtn">CLIQUER</button>
  </div>
</div>

<div id="bgMenu">
  <h3>üé® FONDS</h3>
  <div id="bgButtons"></div>
</div>

<script>
/* ================= √âTAT ================= */
let clicks = 0;
let multiplier = 1;
let kingsEvent = false;

let ownedBackgrounds = JSON.parse(localStorage.getItem("bgs")) || ["matrix"];
let currentBg = localStorage.getItem("currentBg") || "matrix";

/* ================= UI ================= */
const clicksEl=document.getElementById("clicks");
const multEl=document.getElementById("multiplier");
const banner=document.getElementById("eventBanner");
const bgButtons=document.getElementById("bgButtons");

/* ================= CLICK ================= */
document.getElementById("clickBtn").onclick=()=>{
  clicks += multiplier;
  updateUI();
};

/* ================= UPDATE ================= */
function updateUI(){
  clicksEl.innerText = clicks.toLocaleString()+" clics";
  multEl.innerText = "Multiplicateur x"+multiplier;
}

/* ================= EVENT KINGS ================= */
function checkKingsEvent(){
  const d=new Date();
  if(d.getHours()===18 && d.getMinutes()===15){
    startKingsEvent();
  }
}
setInterval(checkKingsEvent,10000);

function startKingsEvent(){
  if(kingsEvent) return;
  kingsEvent=true;
  multiplier=20;
  banner.innerText="üëë KINGS EVENT ACTIF üëë";
  currentBg="kings";

  if(Math.random()<0.25 && !ownedBackgrounds.includes("kings")){
    ownedBackgrounds.push("kings");
    localStorage.setItem("bgs",JSON.stringify(ownedBackgrounds));
    alert("üëë TU AS D√âBLOQU√â LE FOND DES ROIS !");
  }
  renderBgButtons();
}

/* ================= BACKGROUNDS ================= */
function renderBgButtons(){
  bgButtons.innerHTML="";
  ownedBackgrounds.forEach(bg=>{
    const b=document.createElement("button");
    b.className="bgBtn";
    b.innerText=bg.toUpperCase();
    b.onclick=()=>{
      currentBg=bg;
      localStorage.setItem("currentBg",bg);
    };
    bgButtons.appendChild(b);
  });
}
renderBgButtons();

/* ================= CANVAS ================= */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d");
resize();
window.onresize=resize;

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}

const fontSize=18;
let columns;
let drops;

function initMatrix(){
  columns=Math.floor(canvas.width/fontSize);
  drops=Array(columns).fill(1);
}
initMatrix();

function drawMatrix(){
  ctx.fillStyle="rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.font=fontSize+"px monospace";

  for(let i=0;i<drops.length;i++){
    let char, color;
    if(currentBg==="kings"){
      char="üëë";
      color="#ffd700";
    }else{
      char="01";
      color="#00ff88";
    }
    ctx.fillStyle=color;
    ctx.fillText(
      char[Math.floor(Math.random()*char.length)],
      i*fontSize,
      drops[i]*fontSize
    );
    if(drops[i]*fontSize>canvas.height && Math.random()>0.975){
      drops[i]=0;
    }
    drops[i]++;
  }
}

setInterval(drawMatrix,33);

/* ================= INIT ================= */
updateUI();
</script>

</body>
</html>
